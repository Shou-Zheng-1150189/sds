{% extends "base.html" %}
{% block content %}
<div class="container mt-4">

  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="mb-0">Add Student</h2>
    <a class="btn btn-outline-secondary" href="{{ url_for('students') }}">Back to Students</a>
  </div>

  {# 如果你的 app.py 有传 error/message，就会显示在这里 #}
  {% if error %}
    <div class="alert alert-danger">{{ error }}</div>
  {% endif %}
  {% if message %}
    <div class="alert alert-success">{{ message }}</div>
  {% endif %}

  <form method="post" action="{{ url_for('add_student') }}" class="card p-3">
    <div class="row g-3">

      <div class="col-md-6">
        <label class="form-label">First name</label>
        <input type="text"
               name="first_name"
               class="form-control"
               required
               value="{{ request.form.get('first_name','') }}">
      </div>

      <div class="col-md-6">
        <label class="form-label">Last name</label>
        <input type="text"
               name="last_name"
               class="form-control"
               required
               value="{{ request.form.get('last_name','') }}">
      </div>

      <div class="col-md-6">
        <label class="form-label">Email</label>
        <input type="email"
               name="email"
               class="form-control"
               value="{{ request.form.get('email','') }}">
      </div>

      <div class="col-md-6">
        <label class="form-label">Phone</label>
        <input type="text"
               name="phone"
               class="form-control"
               value="{{ request.form.get('phone','') }}">
      </div>

      <div class="col-md-6">
        <label class="form-label">Date of birth</label>
        <input type="date"
               name="date_of_birth"
               class="form-control"
               required
               value="{{ request.form.get('date_of_birth','') }}">
      </div>

      {# ✅ 新增：Date joined / enrollment_date（必填 & 不能晚于今天） #}
      <div class="col-md-6">
        <label class="form-label">Date joined</label>
        <input type="date"
               name="enrollment_date"
               class="form-control"
               required
               max="{{ today }}"
               value="{{ request.form.get('enrollment_date', today) }}">
      </div>

      <div class="col-md-6">
        <label class="form-label">Status</label>
        <select name="status" class="form-select">
          <option value="Active" {% if request.form.get('status','Active') == 'Active' %}selected{% endif %}>Active</option>
          <option value="Inactive" {% if request.form.get('status') == 'Inactive' %}selected{% endif %}>Inactive</option>
        </select>
      </div>

    </div>

    <div class="mt-3 d-flex gap-2">
      <button type="submit" class="btn btn-primary">Save Student</button>
      <a class="btn btn-secondary" href="{{ url_for('students') }}">Cancel</a>
    </div>

  </form>
</div>
{% endblock %}